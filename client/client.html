<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="EOX :: WMM ISO-lines Demo">

  <!-- Allow address bar to hide on mobiles -->
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <title>EOX :: WMM ISO-lines Demo</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />

  <!-- Styles -->
  <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="screen">
  <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.2/css/font-awesome.min.css" rel="stylesheet">
  <link href="./styles/styles.css" rel="stylesheet" type="text/css" media="all" />
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif">

</head>
<body data-spy="scroll" data-target=".navbar" data-offset="75">
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" style="font-size: 160%"><i class="fa fa-globe"></i> EOX::WMM ISO-lines Demo</a>
    </div>
</nav>

<!-- Main Map Element -->
<div class="jumbotron frontpage" style="position: relative;">
  <div id="map">
      <div id="zoom" class="btn-toolbar-vertical btn-group-sm">
          <div class="btn-group-vertical btn-group-sm">
              <button type="button" id="zoomIn" class="btn btn-default"><i class="fa fa-fw fa-plus"></i></button>
              <button type="button" id="zoomOut" class="btn btn-default"><i class="fa fa-fw fa-minus"></i></button>
          </div>
          <button type="button" id="expand" class="btn btn-default"><i class="fa fa-fw fa-expand"></i></button>
      </div>
      <div id="tools" class="btn-group btn-group-sm">
          <div class="btn-group btn-group-sm">
              <button type="button" id="layerSwitcher" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="fa fa-globe"></i> Declination <i class="fa fa-caret-down"></i></button>
              <ul class="dropdown-menu">
                  <li><a href="#" class="baseLayer" data-layer="Declination"><i class="fa fa-check-square-o" data-layer="Declination"></i> Declination</a></li>
                  <li><a href="#" class="baseLayer" data-layer="Inclination"><i class="fa fa-square-o" data-layer="Inclination"></i> Inclination</a></li>
                  <li><a href="#" class="baseLayer" data-layer="F"><i class="fa fa-square-o" data-layer="F"></i> F</a></li>
                  <li><a href="#" class="baseLayer" data-layer="H"><i class="fa fa-square-o" data-layer="H"></i> H</a></li>
                  <li><a href="#" class="baseLayer" data-layer="X"><i class="fa fa-square-o" data-layer="X"></i> X</a></li>
                  <li><a href="#" class="baseLayer" data-layer="Y"><i class="fa fa-square-o" data-layer="Y"></i> Y</a></li>
                  <li><a href="#" class="baseLayer" data-layer="Z"><i class="fa fa-square-o" data-layer="Z"></i> Z</a></li>
              </ul>
          </div>
          <div class="btn-group btn-group-sm" data-toggle="buttons">
              <label class="btn btn-default"><input type="checkbox" id="overlay"><i class="fa fa-road"></i> Overlay</label>
          </div>
      </div>

      <input class="slider" type="range" min="0" />
      <input class="slider-vertical" type="range" />
    </div>
</div>
<!-- Bootstrap -->
<script src="http://code.jquery.com/jquery.js" type="text/javascript"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js" type="text/javascript"></script>
<script src='http://ol3js.org/en/master/build/ol.js'></script>
<script>

function getWMTSTileGridForProjection(projection, maxZoom, square) {
  var projectionExtent = projection.getExtent();
  var size = ol.extent.getWidth(projectionExtent) / 256;

  var resolutions = new Array(maxZoom);
  var matrixIds = new Array(maxZoom);

  var offset = square ? 0 : 1;
  for (var z = 0; z < maxZoom; ++z) {
    // generate resolutions and matrixIds arrays for this WMTS
    resolutions[z] = size / Math.pow(2, z + offset);
    matrixIds[z] = z;
  }

  return new ol.tilegrid.WMTS({
    origin: ol.extent.getTopLeft(projectionExtent),
    resolutions: resolutions,
    matrixIds: matrixIds
  });
}


var urls = [
    'http://a.tiles.maps.eox.at/wmts/',
    'http://b.tiles.maps.eox.at/wmts/',
    'http://c.tiles.maps.eox.at/wmts/',
    'http://d.tiles.maps.eox.at/wmts/',
    'http://e.tiles.maps.eox.at/wmts/',
    'http://f.tiles.maps.eox.at/wmts/',
  ];

var layers = [
  new ol.layer.Tile({
    source: new ol.source.WMTS({
      url: urls,
      layer: "terrain",
      matrixSet: "WGS84",
      format: 'image/jpeg',
      projection: ol.proj.get('EPSG:4326'),
      tileGrid: getWMTSTileGridForProjection(ol.proj.get('EPSG:4326'), 15, false),
      extent: [-180, -90, 180, 90],
      style: 'default'
    })
  }),
  new ol.layer.Tile({
    source: new ol.source.TileWMS({
      url: 'http://localhost:8001/ows',
      params: {
        'VERSION': '1.3.0',
        'LAYERS': 'Declination',
        'FORMAT': 'image/png',
        'ELEVATION': "100",
        'TIME': "2013-1-1"
      },
      extent: [-180, -90, 180, 90],
    })
  }),

];

var map = new ol.Map({
  controls: ol.control.defaults(),
  layers: layers,
  target: 'map',
  view: new ol.View2D({
    projection: 'EPSG:4326',
    center: [0, 0],
    zoom: 2
  })
});
</script>



</html>